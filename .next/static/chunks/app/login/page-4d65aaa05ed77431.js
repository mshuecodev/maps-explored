(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{9278:(e,t,s)=>{Promise.resolve().then(s.bind(s,2386))},2255:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>c,A:()=>d});var a=s(5155),r=s(2115),l=s(399);let n=(0,s(9904).Wp)({apiKey:"AIzaSyBERXsbpdKHB-0SfHfAcbIBTAT1YgJqkvc",authDomain:"mshuecodev-daede.firebaseapp.com",projectId:"mshuecodev-daede",storageBucket:"mshuecodev-daede.firebasestorage.app",messagingSenderId:"453675518398",appId:"1:453675518398:web:af93634aeab4b8a3d051ef",measurementId:"G-JSR0LJVC4G"}),o=(0,l.xI)(n);(0,l.oM)(o,l.iM).catch(e=>{console.error("Error setting persistence:",e)});let u=new l.HF,i=(0,r.createContext)({user:null,loading:!0,token:null,login:async()=>{},handleLogout:async()=>{},handleRegister:async()=>{},loginWithGoogle:async()=>{}}),c=e=>{let{children:t}=e,[s,n]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[g,h]=(0,r.useState)(null),p=async()=>{let e=await (0,l.df)(o,u);console.log("User logged in with Google:",e.user);let t=await (0,l.p9)(e.user);n(e.user),h(t)},f=async(e,t)=>{let s=await (0,l.x9)(o,e,t),a=await (0,l.p9)(s.user);n(s.user),h(a)},m=async(e,t)=>{let s=await (0,l.eJ)(o,e,t);console.log("User registered:",s.user);let a=await (0,l.p9)(s.user);n(s.user),h(a)},x=async()=>{await (0,l.CI)(o),n(null),h(null)},b=async()=>{s&&h(await (0,l.p9)(s,!0))};return(0,r.useEffect)(()=>{if(s){let e=setTimeout(()=>{console.log("Forcing logout after 30 minutes"),x()},18e5);return()=>clearTimeout(e)}},[s]),(0,r.useEffect)(()=>{let e=(0,l.iZ)(o,async e=>{n(e),d(!1),e?h(await (0,l.p9)(e)):h(null)});return()=>{e()}},[]),(0,r.useEffect)(()=>{let e=setInterval(b,9e5);return()=>clearInterval(e)},[s]),(0,a.jsx)(i.Provider,{value:{user:s,loading:c,token:g,login:f,handleRegister:m,handleLogout:x,loginWithGoogle:p},children:t})},d=()=>(0,r.useContext)(i)},2386:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),r=s(2115),l=s(6046),n=s(2255);let o=()=>{let[e,t]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),u=(0,l.useRouter)(),{login:i,token:c,loading:d,loginWithGoogle:g}=(0,n.A)(),h=async t=>{t.preventDefault();try{await i(e,s),console.log("Login successful, pushing to dashboard..."),u.push("/dashboard")}catch(e){console.error("Login failed:",e)}},p=async()=>{try{await g(),console.log("Google login successful, pushing to dashboard..."),u.push("/dashboard")}catch(e){console.error("Google login failed:",e)}};return((0,r.useEffect)(()=>{c&&(console.log("Token exists, redirecting to dashboard..."),u.push("/dashboard"))},[c,u]),d)?(0,a.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})})}):(0,a.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-blue-500 to-purple-600",children:(0,a.jsxs)("div",{className:"text-center p-8 bg-white rounded-lg shadow-lg w-full max-w-md",children:[(0,a.jsx)("h1",{className:"text-4xl font-extrabold text-gray-800 mb-6",children:"Login"}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:s,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"}),(0,a.jsx)("button",{type:"submit",className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:"Login"})]}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"or"}),(0,a.jsx)("button",{onClick:p,className:"w-full mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition",children:"Login with Google"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Don't have an account?"}),(0,a.jsx)("a",{href:"/register",className:"w-full mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition inline-block text-center",children:"Register"})]})})}},6046:(e,t,s)=>{"use strict";var a=s(6658);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[523,361,441,517,358],()=>t(9278)),_N_E=e.O()}]);